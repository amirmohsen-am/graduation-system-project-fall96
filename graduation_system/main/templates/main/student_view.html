{% extends 'main/base.html' %}

{% block title %} Designer {% endblock %}

{% block style %}
{% endblock %}

{% block script %}
{% endblock %}

{% block content %}
        {% load staticfiles %}
    {% load static %}
    <h1 style="text-align: center">Welcome to Graduation System</h1>

    <h5 style="text-align: center " >Dear <span style="color: #ff0000">{{ student.user }}  </span> here is your processes:</h5>
    <table class="table table-hover" style="border: 2px solid black; ">
      <thead class="thead-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Name</th>
          <th scope="col">Number of Tasks</th>
          <th scope="col"> State </th>
            <th scope="col"> Delete </th>
        </tr>
      </thead>
      <tbody>

            {% for proc_instance in student.processinstance_set.all  %}
                {% if proc_instance.process_complete %}
                  <tr>
                  <th scope="row">{{ forloop.counter }}</th>
                  <td> <a>{{ proc_instance.process.name }}</a></td>
                  <td>{{ proc_instance.process.task_set.all|length }}</td>
                  <td style="color: #28a745"> Done</td>
                  <td> <a href="{% url 'process-instance-delete' proc_instance.id %}" >  <img style="height: 20px" src={% static "pics/Delete_icon.png" %}  alt="Delete"> </a></td>
                </tr>
                {% else %}
                  <tr>
                  <th scope="row">{{ forloop.counter }}</th>
                  <td> <a href="{% url 'process-instance-view' proc_instance.id %}">{{ proc_instance.process.name }}</a></td>
                  <td>{{ proc_instance.process.task_set.all|length }}</td>
                  <td style="color: #721c24">Pending</td>
                  <td> <a href="{% url 'process-instance-delete' proc_instance.id %}" >  <img style="height: 20px" src={% static "pics/Delete_icon.png" %}  alt="Delete"> </a></td>
                    </tr>
                {% endif %}
            {% endfor %}
      </tbody>
    </table>
{#    <a type="submit" class="btn btn-primary" href="{% url 'designer-view'%}"> Add Processes</a>#}

    <h3>Here you can select:</h3>



    <table class="table table-hover" style="border: 2px solid black; ">
          <thead class="thead-dark">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col">Number of Tasks</th>
              <th scope="col"> </th>
            </tr>
          </thead>
          <tbody>
                {% for proc in processes %}
                    <tr>
                      <th scope="row">{{ forloop.counter }}</th>
                      <td> <a href="{% url 'process-view' proc.id %}">{{ proc.name }}</a></td>
                      <td>{{ proc.task_set.all|length }}</td>
                      <td><a href="{% url 'process-select' proc.id %}" type="button" class="btn btn-primary" > Select Process </a></td>
                    </tr>
                {% endfor %}
          </tbody>
    </table>
{% endblock %}
